<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sense - Verbanwendung</title>
    <!-- Ihr CSS wie zuvor -->
</head>
<body>
    <!-- Ihr HTML wie zuvor -->
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Variablen und DOM-Elemente wie zuvor
            
            // Dateinamen
            const files = [
                'Coded_Verb.txt',    // Erste Datei
                'Coded_Verbs_B.txt'  // Zweite Datei
            ];
            
            // Initialisieren
            initSystem();
            
            // Event-Listener f체r Formelelemente wie zuvor
            
            // Laden der Daten aus allen Dateien
            async function initSystem() {
                loadingIndicator.style.display = 'block';
                loadingIndicator.textContent = 'Lade Daten...';
                
                try {
                    // Sammle alle Daten aus allen Dateien
                    let allData = '';
                    
                    // Dateien nacheinander laden
                    for (let i = 0; i < files.length; i++) {
                        const fileName = files[i];
                        loadingIndicator.textContent = `Lade Datei ${i+1} von ${files.length}...`;
                        
                        try {
                            // Datei laden mit Timeout
                            const data = await fetchWithTimeout(fileName, 10000); // 10 Sekunden Timeout
                            if (data) {
                                allData += (allData ? '\n\n' : '') + data;
                                console.log(`Datei ${fileName} erfolgreich geladen.`);
                            }
                        } catch (fileError) {
                            console.error(`Fehler beim Laden der Datei ${fileName}:`, fileError);
                            showError(`Fehler beim Laden der Datei ${fileName}: ${fileError.message}`);
                            // Fahre trotz Fehler mit der n채chsten Datei fort
                        }
                    }
                    
                    if (!allData) {
                        throw new Error("Keine Daten konnten geladen werden.");
                    }
                    
                    // Verarbeite die gesammelten Daten
                    loadingIndicator.textContent = 'Verarbeite Daten...';
                    processVerbFile(allData);
                    
                    // Zeige den ersten Eintrag, wenn verf체gbar
                    if (verbEntries.length > 0) {
                        displayEntry(0);
                    }
                    
                    // Aktualisiere Navigationselemente
                    updateNavButtons();
                    
                } catch (error) {
                    console.error("Fehler beim Initialisieren:", error);
                    showError("Fehler beim Laden der Daten: " + error.message);
                } finally {
                    loadingIndicator.style.display = 'none';
                }
            }
            
            // Fetch mit Timeout-Funktion
            async function fetchWithTimeout(resource, timeoutMs) {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeoutMs);
                
                try {
                    const response = await fetch(resource, {
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP Fehler ${response.status}`);
                    }
                    
                    return await response.text();
                } catch (error) {
                    clearTimeout(timeoutId);
                    if (error.name === 'AbortError') {
                        throw new Error('Zeit체berschreitung beim Laden der Datei');
                    }
                    throw error;
                }
            }
            
            // Rest Ihres Codes wie zuvor (processVerbFile, displayEntry, etc.)
        });
    </script>
</body>
</html>